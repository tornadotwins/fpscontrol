<behaviortree name="ShockTrooper1" repeatuntil="" precondition="" debug="False"><selector name="root" repeatuntil="" precondition="" debug="False"><condition name="condition" repeatuntil="" precondition="" debug="False" expression="dead == 1" /><parallel name="main loop" repeatuntil="" precondition="health &gt; 0" debug="False" fail="any" succeed="any" tiebreaker="fail"><sequencer name="melee behavior" repeatuntil="" precondition="domelee != 1" debug="False"><assign name="set melee false" repeatuntil="" precondition="" debug="False" expression="domelee = 0" min="0" max="1" /><detect name="detect melee target" repeatuntil="success" precondition="" debug="False" sensor="MeleeSensor" aspect="meleetarget" variable="meleetarget" /><assign name="set melee true" repeatuntil="" precondition="" debug="False" expression="domelee = 1" min="0" max="1" /></sequencer><selector name="main behavior" repeatuntil="" precondition="domelee != 1" debug="False"><selector name="patrol" repeatuntil="" precondition="health &gt; 0" debug="False"><parallel name="patroluntilenemy" repeatuntil="" precondition="enemy != 1" debug="False" fail="any" succeed="all" tiebreaker="fail"><sequencer name="patrol checklist" repeatuntil="failure" precondition="" debug="False"><assign name="set stop patrol" repeatuntil="" precondition="" debug="False" expression="quitpatrol = 1" min="0" max="1" /><condition name="not dead" repeatuntil="" precondition="" debug="False" expression="health &gt; 0" /><condition name="not enemy" repeatuntil="" precondition="" debug="False" expression="enemy != 1" /><condition name="not shot" repeatuntil="" precondition="" debug="False" expression="gothit != 1" /><assign name="set start patrol" repeatuntil="" precondition="" debug="False" expression="quitpatrol = 0" min="0" max="1" /></sequencer><sequencer name="detect enemy" repeatuntil="" precondition="quitpatrol != 1" debug="False"><detect name="wait until enemy detected" repeatuntil="success" precondition="" debug="False" sensor="SightSensor" aspect="player" variable="enemytarget" /><assign name="set enemy known" repeatuntil="" precondition="" debug="False" expression="enemy = 1" min="0" max="1" /><assign name="set enemy in visual sight" repeatuntil="" precondition="" debug="False" expression="enemysight = 1" min="0" max="1" /></sequencer><sequencer name="Patrol" repeatuntil="" precondition="quitpatrol != 1" debug="False"><sequencer name="patrolinit" repeatuntil="" precondition="" debug="False"><action name="patrol find nearest" repeatuntil="" precondition="" debug="False" classname="PatrolFindNearest" /><move name="go to patrol point" repeatuntil="" precondition="" debug="True" movetarget="patrolposition" movespeed="1.5" animation="Walk" animationwrapmode="loop" animationbasespeed="1.5" /><selector name="patrolroot" repeatuntil="running" precondition="" debug="True"><sequencer name="sequencer" repeatuntil="failure" precondition="" debug="False"><action name="patrol get next" repeatuntil="" precondition="" debug="False" classname="PatrolGetNext" /><move name="go to patrol point" repeatuntil="" precondition="" debug="False" movetarget="patrolposition" movespeed="1.5" animation="Walk" animationwrapmode="loop" animationbasespeed="1.5" /></sequencer><action name="patrol switch direction" repeatuntil="" precondition="" debug="False" classname="PatrolSwitchDirection" /></selector></sequencer></sequencer></parallel></selector><selector name="Attack" repeatuntil="" precondition="health &gt; 0" debug="False"><sequencer name="attack" repeatuntil="" precondition="enemysight == 1" debug="False"><condition name="condition" repeatuntil="" precondition="" debug="False" expression="gothit != 1" /><move name="Look" repeatuntil="" precondition="" debug="False" looktarget="enemytarget" lookspeed="180" animation="AimLoop" animationwrapmode="loop" animationbasespeed="1" /><parallel name="firing loop" repeatuntil="" precondition="ammo &gt; 0" debug="False" fail="any" succeed="all" tiebreaker="fail"><condition name="condition" repeatuntil="failure" precondition="" debug="False" expression="gothit != 1" /><move name="Look" repeatuntil="running" precondition="" debug="False" looktarget="enemytarget" lookspeed="180" animation="FireLoop" animationwrapmode="loop" animationbasespeed="1" /><animate name="fire" repeatuntil="" precondition="" debug="False" animation="FireLoop" waitforsec="0" layer="0" wrapmode="loop" fadein="0" fadeout="0" /><selector name="selector" repeatuntil="" precondition="" debug="False"><detect name="maintain sight of target" repeatuntil="failure" precondition="" debug="False" sensor="SightSensor" aspect="player" variable="enemytarget2" /><assign name="set target sight lost" repeatuntil="" precondition="" debug="False" expression="enemysight = 0" min="0" max="1" /></selector><action name="Fire Primary Weapon" repeatuntil="running" precondition="" debug="False" classname="Shoot" /></parallel></sequencer><sequencer name="reload" repeatuntil="" precondition="ammo &lt; 1" debug="False"><animate name="reload" repeatuntil="" precondition="" debug="False" animation="Reload" waitforsec="3" layer="0" wrapmode="clamp" fadein="0" fadeout="0" /><action name="Reload Primary Weapon" repeatuntil="" precondition="" debug="False" classname="Reload" /></sequencer></selector><parallel name="Seek" repeatuntil="" precondition="enemysight != 1" debug="False" fail="any" succeed="all" tiebreaker="fail"><sequencer name="seek checklist" repeatuntil="running" precondition="" debug="False"><assign name="set quit seek" repeatuntil="" precondition="" debug="False" expression="quitseek = 1" min="0" max="1" /><condition name="not dead" repeatuntil="" precondition="" debug="False" expression="health &gt; 0" /><condition name="have enemy" repeatuntil="" precondition="" debug="False" expression="enemy == 1" /><condition name="not shot" repeatuntil="" precondition="" debug="False" expression="gothit != 1" /><assign name="set start seek" repeatuntil="" precondition="" debug="False" expression="quitseek = 0" min="0" max="1" /></sequencer><sequencer name="look for enemy" repeatuntil="running" precondition="quitseek == 0" debug="False"><detect name="detect" repeatuntil="success" precondition="" debug="False" sensor="SightSensor" aspect="player" variable="enemytarget2" /><assign name="forget enemy" repeatuntil="" precondition="" debug="False" expression="enemy = 0" min="0" max="1" /><detect name="detect" repeatuntil="" precondition="" debug="False" sensor="SightSensor" aspect="player" variable="enemytarget" /><assign name="set enemy" repeatuntil="" precondition="" debug="False" expression="enemy = 1" min="0" max="1" /><assign name="set enemysight" repeatuntil="" precondition="" debug="False" expression="enemysight = 1" min="0" max="1" /></sequencer><selector name="selector" repeatuntil="" precondition="quitseek == 0" debug="True"><move name="move" repeatuntil="" precondition="enemysight != 1" debug="False" movetarget="enemytarget" movespeed="4" animation="RunLoop" animationwrapmode="loop" animationbasespeed="2" /></selector></parallel><sequencer name="react to getting hit" repeatuntil="" precondition="gothit == 1" debug="True"><assign name="reset gothit" repeatuntil="" precondition="" debug="True" expression="gothit = 0" min="0" max="1" /><condition name="condition" repeatuntil="" precondition="" debug="True" expression="health &gt; 0" /><assign name="set enemy known" repeatuntil="" precondition="" debug="True" expression="enemy = 1" min="0" max="1" /><selector name="selector 14410" repeatuntil="" precondition="" debug="True"><animate name="left" repeatuntil="" precondition="hitdir == 4" debug="False" animation="HitTorsoLeft" waitforsec="0.5" layer="0" wrapmode="clamp" fadein="0" fadeout="0" /><animate name="right" repeatuntil="" precondition="hitdir == 2" debug="False" animation="HitTorsoRight" waitforsec="0.5" layer="0" wrapmode="clamp" fadein="0" fadeout="0" /><animate name="front" repeatuntil="" precondition="hitdir == 1" debug="False" animation="HitTorsoBack" waitforsec="0.5" layer="0" wrapmode="clamp" fadein="0" fadeout="0" /><animate name="back" repeatuntil="" precondition="hitdir == 3" debug="False" animation="HitTorsoBack" waitforsec="0.5" layer="0" wrapmode="clamp" fadein="0" fadeout="0" /></selector></sequencer></selector></parallel><sequencer name="melee" repeatuntil="" precondition="health &gt; 0" debug="False"><condition name="condition" repeatuntil="" precondition="" debug="False" expression="domelee == 1" /><animate name="animate melee 1/2" repeatuntil="" precondition="" debug="False" animation="MeleeAttack" waitforsec="0.5" layer="0" wrapmode="clamp" fadein="0" fadeout="0" /><action name="Melee Attack" repeatuntil="" precondition="" debug="False" classname="Melee" /><animate name="animate 29514" repeatuntil="" precondition="" debug="False" animation="MeleeAttack" waitforsec="0.6" layer="0" wrapmode="clamp" fadein="0" fadeout="0" /><sequencer name="sequencer 1618" repeatuntil="" precondition="" debug="False"><assign name="assign 1044" repeatuntil="" precondition="" debug="False" expression="domelee = 0" min="0" max="1" /><detect name="detect 6359" repeatuntil="" precondition="" debug="False" sensor="MeleeSensor" aspect="meleetarget" variable="meleetarget" /><assign name="assign 6715" repeatuntil="" precondition="" debug="False" expression="domelee = 1" min="0" max="1" /></sequencer></sequencer><sequencer name="die" repeatuntil="" precondition="health &lt;= 0" debug="False"><assign name="assign" repeatuntil="" precondition="" debug="False" expression="dead = 1" min="0" max="1" /><animate name="die" repeatuntil="" precondition="" debug="False" animation="DieEasy" waitforsec="5" layer="0" wrapmode="clamp" fadein="0" fadeout="0" /><action name="Die" repeatuntil="" precondition="" debug="False" classname="Die" /></sequencer></selector></behaviortree>